<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Assinatura e Foto</title>
    <style>
        /* Estilos básicos */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #f7f7f7;
        }

        #tela-inicial,
        #tela-assinatura {
            text-align: center;
        }

        canvas {
            border: 1px solid #ccc;
        }

        button {
            margin-top: 20px;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
        }
    </style>
</head>

<body>

    <!-- Tela Inicial -->
    <div id="tela-inicial">
        <button id="btnIniciarAssinatura">Assinar</button>
        <!-- Outros elementos da tela inicial -->
    </div>

    <!-- Tela de Assinatura -->
    <div id="tela-assinatura" style="display:none;">
        <canvas id="assinatura" width="400" height="200"></canvas>
        <button id="btnConcluirAssinatura">Concluir</button>
        <button id="btnLimparAssinatura">Limpar</button>
    </div>

    <script>
        // ----------- CAPTURA DE ASSINATURA ----------- 
        const assinaturaCanvas = document.getElementById("assinatura");
        const ctx = assinaturaCanvas.getContext("2d");
        let desenhando = false;

        // Ajustes visuais da assinatura
        ctx.lineWidth = 3;
        ctx.lineJoin = "round";
        ctx.lineCap = "round";
        ctx.strokeStyle = "#333";

        // Funções para desenhar
        const startDrawing = (x, y) => {
            desenhando = true;
            ctx.beginPath();
            ctx.moveTo(x, y);
        };

        const draw = (x, y) => {
            if (desenhando) {
                ctx.lineTo(x, y);
                ctx.stroke();
            }
        };

        const stopDrawing = () => {
            desenhando = false;
        };

        // Eventos para desktop (mouse)
        assinaturaCanvas.addEventListener("mousedown", (e) => {
            startDrawing(e.offsetX, e.offsetY);
        });

        assinaturaCanvas.addEventListener("mousemove", (e) => {
            if (desenhando) {
                draw(e.offsetX, e.offsetY);
            }
        });

        assinaturaCanvas.addEventListener("mouseup", stopDrawing);
        assinaturaCanvas.addEventListener("mouseleave", stopDrawing);

        // Eventos para dispositivos móveis (toque)
        assinaturaCanvas.addEventListener("touchstart", (e) => {
            e.preventDefault(); // Evita o comportamento de rolagem
            let touch = e.touches[0];
            let rect = assinaturaCanvas.getBoundingClientRect();
            startDrawing(touch.clientX - rect.left, touch.clientY - rect.top);
        });

        assinaturaCanvas.addEventListener("touchmove", (e) => {
            if (desenhando) {
                let touch = e.touches[0];
                let rect = assinaturaCanvas.getBoundingClientRect();
                draw(touch.clientX - rect.left, touch.clientY - rect.top);
            }
            e.preventDefault(); // Evita rolagem da tela
        });

        assinaturaCanvas.addEventListener("touchend", stopDrawing);

        // Função para limpar a assinatura
        function limparAssinatura() {
            ctx.clearRect(0, 0, assinaturaCanvas.width, assinaturaCanvas.height);
        }

        // ----------- TROCAR PARA A TELA DE ASSINATURA ----------- 
        const btnIniciarAssinatura = document.getElementById("btnIniciarAssinatura");
        const btnConcluirAssinatura = document.getElementById("btnConcluirAssinatura");
        const btnLimparAssinatura = document.getElementById("btnLimparAssinatura");
        const telaInicial = document.getElementById("tela-inicial");
        const telaAssinatura = document.getElementById("tela-assinatura");

        btnIniciarAssinatura.addEventListener("click", () => {
            // Ocultar a tela inicial e mostrar a tela de assinatura
            telaInicial.style.display = "none";
            telaAssinatura.style.display = "block";
        });

        // Concluir a assinatura e voltar para a tela inicial
        btnConcluirAssinatura.addEventListener("click", () => {
            // Aqui você pode capturar a imagem da assinatura em base64, se necessário
            const assinaturaBase64 = assinaturaCanvas.toDataURL("image/png");

            // Limpar a assinatura e voltar para a tela inicial
            limparAssinatura();
            telaAssinatura.style.display = "none";
            telaInicial.style.display = "block";

            // Opcionalmente, você pode exibir a assinatura ou usá-la de alguma maneira
            console.log("Assinatura concluída:", assinaturaBase64);
        });

        // Limpar a assinatura
        btnLimparAssinatura.addEventListener("click", limparAssinatura);
    </script>

</body>

</html>